{% extends "base.html" %} {% load static %} {% block content %}
<div>
   <h2 class="mb-4">{{ recipient.name }}'s Wish List</h2>
   <!-- DELETE MODE BAR -->
   <div class="card shadow-sm mb-4">
      <div class="card-body d-flex justify-content-between align-items-center">
         <!-- Delete Mode Toggle -->
         <div class="form-check form-switch">
            <input
               class="form-check-input"
               type="checkbox"
               id="bulkDeleteToggle"/>
            <label class="form-check-label fw-semibold" for="bulkDeleteToggle">
               Delete Items
            </label>
         </div>
         <!-- Bulk Controls -->
         <div
            id="deleteControls"
            class="d-flex align-items-center gap-3">
            <div class="form-check">
               <input class="form-check-input bulk-checkbox" type="checkbox" id="selectAll" />
               <label class="form-check-label" for="selectAll">
                  Select All
               </label>
            </div>
            <button
               class="btn btn-danger btn-sm px-3"
               onclick="openBulkDeleteModal()"
               data-bs-toggle="modal"
               data-bs-target="#deleteModal">
               <i class="bi bi-trash"></i> Delete Selected
            </button>
         </div>
      </div>
   </div>
   {% if wishlist_items %}
   <ul class="gift-list">
      {% for item in wishlist_items %}
      <li
         class="gift">
         <div class="d-flex align-items-center gap-3">
            <div class="form-check delete-checkbox-wrapper">
                <input
                type="checkbox"
                class="form-check-input delete-checkbox"
                value="{{ item.id }}"/>
            </div>
            <!-- Image (if exists) -->
            {% if item.product_image %}
            <img
               src="{{ item.product_image }}"
               alt="{{ item.product_name }}"
               class="img-thumbnail"/>
            {% endif %}
            <div class="d-flex flex-column">
               <!-- Name (if exists) -->
               {% if item.product_name %}
               <a
                  href="{{ item.item_url }}"
                  class="fw-semibold text-decoration-none text-primary"
                  target="_blank">
                  {{ item.product_name }}
               </a>
               {% else %}
               <a
                  href="{{ item.item_url }}"
                  class="text-decoration-none fw-semibold text-primary"
                  target="_blank">
                  {{ item.item_url }}
               </a>
               {% endif %}
               <!-- Price (if exists) -->
               {% if item.product_price %}
               <span class="text-muted small">${{ item.product_price }}</span>
               {% endif %}
            </div>
         </div>
      </li>
      {% endfor %}
   </ul>
   {% else %}
   <p class="text-muted fst-italic">No items in this wish list yet.</p>
   {% endif %}
   <!-- ADD BUTTON -->
   <button
      class="btn btn-primary"
      data-bs-toggle="modal"
      data-bs-target="#addModal"
      onclick="giftModal('Add Item to {{ r.name }}\'s Wish List', `{% url 'add_wish_list' recipient.id %}`)">
      Add Item +
   </button>
</div>
{% endblock %}
